# 13.1. 簡介

PostgreSQL 為開發者們提供了豐富的工具來管理資料的共時存取。資料的一致性在內部會使用多版本模式的多版本共時控制（Multiversion Concurrency Control，MVCC），這表示無論當前資料的現在狀態如何，每個 SQL 指令會看見的是資料在一段時間前的快照（資料庫的某個版本）。這個機制可以避免指令看到由於其他的共時交易正在更新同個資料列而產生的資料不一致，也對每個資料庫的 session 提供了 _交易隔離_。MVCC 也藉由避開傳統資料庫系統的上鎖方式減少了鎖的競爭，以在多使用者的環境中提供合理的效能。

相較於上鎖的機制來說，共時控制使用 MVCC 模式的主要優勢，是在於 MVCC 對於查詢（讀取）資料的鎖並不會和寫入資料的鎖發生衝突，因此讀取不會阻擋寫入、寫入也不會阻擋讀取。PostgreSQL 即使在提供最嚴格的交易隔離等級中，也會透過使用創新的 _可序列化快照隔離_（Serializable Snapshot Isolation，SSI）等級來維持這個保證。

對於不需要完整的交易隔離、或者喜歡明確地管理特定衝突點的應用程式，PostgreSQL 也提供表格和列等級的上鎖功能。然而適當地使用 MVCC 一般能夠提供比上鎖更佳的效能。In addition, application-defined advisory locks provide a mechanism for acquiring locks that are not tied to a single transaction.